<!DOCTYPE html>
<html mip>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
  <title>MIP Bind</title>
  <link rel="canonical">
  <link rel="stylesheet" href="../../dist/mip.css">
  <style mip-custom>
  .block {
    height: 200px;
  }
  .bg-green {
    background: green;
  }
  .bg-blue {
    background: blue;
  }

  .a {
    color: #ff0000;
  }

  .b {
    color: #880000;
  }

  .c {
    color: #f0f000;
  }

  .d {
    color: #00ff00;
  }

  .e {
    color: #00f0f0;
  }

  .f {
    color: #008800;
  }

  .g {
    color: #0000ff;
  }

  .h {
    color: #000088;
  }

  .i {
    color: #880088;
  }

  .j {
    color: #000000;
  }


  </style>
</head>
<body>
  <mip-data>
    <script type="application/json">
      {
        "flag": 10086,
        "complex": {
          "multi": "abcdefghij"
        },
        "arr": [
          10086, 2, 3, 4, 5
        ],
        "styles": [
          {
             "fontSize": "16px"
          },
          {
            "color": "#f00"
          },
          {
            "display": ["-webkit-box", "-ms-flexbox", "flex"]
          },
          {
            "background": "#00f"
          }
        ],
        "style": {
          "fontSize": "16px",
          "color": "#f00",
          "display": ["-webkit-box", "-ms-flexbox", "flex"],
          "background": "#00f"
        },
        "colors": [
          "#f00",
          "#0f0",
          "#00f",
          "#f0f",
          "#0ff"
        ],
        "styleIndex": 0
      }
    </script>
  </mip-data>
  <div>
    <p m-text="flag"></p>
    <p m-text="arr.join(' ')"></p>
    <!-- <button -->
    <!--       on="click:MIP.setData({ -->
    <!--         madafaka: m.flag > 0 ? &#45;1 : 1, -->
    <!--         arr: m.arr.slice().sort(function (a, b) { -->
    <!--           return m.flag > 0 ? (a &#45; b) : (b &#45; a) -->
    <!--         }) -->
    <!--       })" -->
    <!-- >click me</button> -->
        <button
          on="click:MIP.setData({
            flag: m.flag > 0 ? -1 : 1,
            arr: m.arr.slice().sort((a, b) => m.flag > 0 ? (a - b) : (b - a))
          })"
    >click me</button>

    <button
      on="click:MIP.setData({
          'flag': flag > 0 ? -1 : 1
      })"
      >change flag</button>
    <button
      on="click:MIP.setData({
              test: {
                for: {
                  watch: 10086
                }
              }
      })"
      >set test for watch </button>
    <button
      on="click:MIP.setData({
          test: null
        })"
      >set test for watch </button>

  </div>
  <div>
    <button
      on="click:test.scrollTo(duration=2000, position='enter')"
    >test global element scollTo</button>
  </div>
    <div>
    <button
      on="click:MIP.setData({
        className: {
          spanClass: complex.multi[Math.round(Math.random() * 10)]
        }
      })"
    >test mip-bind class</button>
    <button
      on="
      click:
        MIP.setData({
          styleIndex: Math.floor(Math.random() * keys(style).length)
        }),
        MIP.setData({
          styleObject: null
        }),
        MIP.setData({
          styleObject: styles[styleIndex]
        })
      "
    >test mip-bind style</button>
    <div>
      <p>test mip-bind class/style</p>
      <span
        class="common-span"
        m-bind:class="className.spanClass"
      >test mip-bind class</span>
      <span
        style="border: 1px solid #dcdcdc"
        m-bind:style="styleObject"
        m-text="'current style index is:' + styleIndex"
      ></span>
    </div>
  </div>
  <mip-script>
    MIP.watch('flag', function (newVal, oldVal) {
      console.log('flag change from [' + oldVal + '] to [' + newVal + ']')
    })

    MIP.watch('test.for.watch', function (newVal, oldVal) {
      console.log('test.for.watch change from [' + oldVal + '] to [' +  newVal + ']')
    })
  </mip-script>
  <div>
    <p>test m-bind:value</p>
    <p>the value of input is: <span m-text="two.way.binding"></span></p>
    <input m-bind:value="two.way.binding">
    <button
      on="click:MIP.setData({
        two: {
          way: {
            binding: ''
          }
        }
      })"
    >clear input</button>
  </div>
  <div class="block bg-green"></div>
  <div class="block bg-blue"></div>
  <div class="block bg-green"></div>
  <div class="block bg-blue"></div>
  <div class="block bg-green" id="test"></div>
  <div class="block bg-blue"></div>
  <div class="block bg-green"></div>
  <!-- <script src="https://c.mipcdn.com/static/v2/mip.js"></script> -->
  <script src="../../dist/mip.js"></script>
  <script src="https://c.mipcdn.com/static/v2/mip-script/mip-script.js"></script>
</body>
</html>

